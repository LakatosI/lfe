%% -*- mode: erlang; indent-tabs-mode: nil -*-

{erl_opts, [debug_info]}.

{profiles, [{test, [{deps, [{proper,
                             {git, "git://github.com/manopapad/proper.git",
                              {branch, "master"}}}]}]}]}.

{project_plugins, [{rebar3_proper,
                    {git, "git://github.com/ferd/rebar3_proper.git",
                     {branch, "master"}}}]}.

{overrides, [{override, rebar3_proper,
              [{deps, [{proper,
                        {git, "git://github.com/manopapad/proper.git",
                         {branch, "master"}}}]}]}]}.

{pre_hooks, [{"(linux|darwin|solaris)", ct, "make"},
             {"(linux|darwin|solaris)", ct,
              "./bin/lfec -o ./_build/test/lib/lfe/ebin test/*_SUITE.lfe"},
             {"(freebsd|netbsd|openbsd)", ct, "gmake"},
             {"(freebsd|netbsd|openbsd)", ct,
              "./bin/lfec -o ./_build/test/lib/lfe/ebin test/*_SUITE.lfe"}
             %% TODO: Test this on a win32 box
             %% {"win32", ct, "make"},
             %% {"win32", ct,
             %%  "./bin/lfec -o ./_build/test/lib/lfe/ebin test/*_SUITE.lfe"}
            ]}.

{ct_opts, [{dir, "ebin"}]}.

{proper_opts, [{spec_timeout, 30000}, {numtests, 1000}, {max_size, 10}]}.
